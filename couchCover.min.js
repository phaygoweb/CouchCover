(function(){var c={version:"0.0.1",init:function(a){for(var b in a)c.hasOwnProperty(b)||(c[b]=a[b])},xhr:function(a,b,d){var e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(!e)return!1;a.url=c.host+"/"+a.url;if(!a.method)a.method="GET";e.onreadystatechange=function(){if(e.readyState===4){if(e.status===200)if(d)d(e);else return e}else return!1};e.open(a.method,a.url,!0);(a.method==="PUT"||a.method==="POST")&&e.setRequestHeader("Content-Type","application/json");
b!==""?e.send(b):e.send(null)}};c.database={create:function(a,b){c.xhr({url:a.db,method:"PUT"},null,function(a){b&&b(a.responseText)})},"delete":function(a,b){c.xhr({url:a.db,method:"DELETE"},null,function(a){b&&b(a.responseText)})},viewAll:function(a,b){c.xhr({url:"_all_dbs"},null,function(a){b&&b(a.responseText)})},view:function(a,b){c.xhr({url:a.db},null,function(a){b&&b(a.responseText)})}};c.doc={create:function(a,b,d){c.xhr({url:a.db+"/"+a.docId,method:"PUT"},b,function(a){d&&d(a.responseText)})},
"delete":function(a,b){var d=a.db+"/"+a.docId;a.docRev?d+="?rev="+a.docRev:c.doc.revision({db:a.db,docId:a.docId},function(a){d+="?rev="+a;c.xhr({url:d,method:"DELETE"},null,function(a){b&&b(a.responseText)})})},update:function(a,b,d){var e=a.db+"/"+a.docId,f=JSON.parse(b);f._rev?c.xhr({url:e,method:"PUT"},b,function(a){d&&d(a.responseText)}):c.doc.revision(a,function(a){f._rev=a;b=JSON.stringify(f);c.xhr({url:e,method:"PUT"},b,function(a){d&&d(a.responseText)})})},view:function(a,b){c.xhr({url:a.db+
"/"+a.docId},null,function(a){b&&b(a.responseText)})},revision:function(a,b){c.xhr({url:a.db+"/"+a.docId,method:"HEAD"},null,function(a){b&&b(a.getResponseHeader("Etag").replace(/"/gi,""))})}};window.couchCover=window.cc$=c})(window);